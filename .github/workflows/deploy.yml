# Debug Workflow - Find out what's wrong
# Save this as: .github/workflows/debug.yml

name: Debug Repository Structure

on:
  push:
    branches: [main, master]

jobs:
  debug:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Show repository structure
      run: |
        echo "=== REPOSITORY ROOT ==="
        ls -la
        echo ""
        
        echo "=== ALL PYTHON FILES ==="
        find . -name "*.py" -type f
        echo ""
        
        echo "=== ALL DOCKERFILES ==="
        find . -name "Dockerfile" -type f
        echo ""
        
        echo "=== GATEWAY DIRECTORY ==="
        if [ -d "gateway" ]; then
          ls -la gateway/
        else
          echo "Gateway directory not found"
        fi
        echo ""
        
        echo "=== WORKFLOW FILES ==="
        ls -la .github/workflows/
        echo ""
        
        echo "=== FILE TREE ==="
        tree . 2>/dev/null || find . -type f | head -20
